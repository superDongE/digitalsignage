{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/esm/slicedToArray\"));\n\nvar _from = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/array/from\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/promise\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/esm/toConsumableArray\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs2/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\"));\n\nvar ReactEasyState = require('react-easy-state');\n\nvar store = ReactEasyState.store;\n\nvar _ = require('lodash');\n\nvar DisplayActions = require('../actions/display');\n\nvar shortid = require('shortid');\n\nvar updateDisplayThrottled = _.debounce(function (id, data) {\n  return DisplayActions.updateDisplay(id, data);\n}, 300);\n\nvar display = store({\n  id: null,\n  name: null,\n  layout: null,\n  statusBar: null,\n  widgets: null,\n  setId: function () {\n    var _setId = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(id) {\n      var displayInfo;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (id) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              display.id = id;\n              _context.next = 5;\n              return DisplayActions.getDisplay(id);\n\n            case 5:\n              displayInfo = _context.sent;\n              display.layout = displayInfo.layout;\n              display.statusBar = displayInfo.statusBar;\n              display.name = displayInfo.name;\n              display.widgets = displayInfo.widgets;\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    function setId(_x) {\n      return _setId.apply(this, arguments);\n    }\n\n    return setId;\n  }(),\n  setName: function setName(name) {\n    if (!name) return;\n    display.name = name;\n  },\n  updateName: function updateName(name) {\n    if (!name) return;\n    display.name = name;\n    updateDisplayThrottled(display.id, {\n      name: name\n    });\n  },\n  updateLayout: function updateLayout(layout) {\n    if (!layout || !['spaced', 'compact'].includes(layout)) return;\n    display.layout = layout;\n    updateDisplayThrottled(display.id, {\n      layout: layout\n    });\n  },\n  addStatusBarItem: function addStatusBarItem(type) {\n    display.statusBar = [].concat((0, _toConsumableArray2.default)(display.statusBar), [type + '_' + shortid.generate()]);\n    updateDisplayThrottled(display.id, {\n      statusBar: display.statusBar\n    });\n    return _promise.default.resolve();\n  },\n  removeStatusBarItem: function removeStatusBarItem(id) {\n    display.statusBar = (0, _toConsumableArray2.default)(display.statusBar.slice(0, id).concat(display.statusBar.slice(id + 1)));\n    updateDisplayThrottled(display.id, {\n      statusBar: display.statusBar\n    });\n  },\n  reorderStatusBarItems: function reorderStatusBarItems(startIndex, endIndex) {\n    var result = (0, _from.default)(display.statusBar);\n\n    var _result$splice = result.splice(startIndex, 1),\n        _result$splice2 = (0, _slicedToArray2.default)(_result$splice, 1),\n        removed = _result$splice2[0];\n\n    result.splice(endIndex, 0, removed);\n    display.statusBar = result;\n    updateDisplayThrottled(display.id, {\n      statusBar: display.statusBar\n    });\n  }\n});\nmodule.exports = display;","map":{"version":3,"sources":["C:/Users/해동2/Desktop/복구작업중/digitalsignage-edit (3)/digitalsignage-edit/stores/display.js"],"names":["ReactEasyState","require","store","_","DisplayActions","shortid","updateDisplayThrottled","debounce","id","data","updateDisplay","display","name","layout","statusBar","widgets","setId","getDisplay","displayInfo","setName","updateName","updateLayout","includes","addStatusBarItem","type","generate","resolve","removeStatusBarItem","slice","concat","reorderStatusBarItems","startIndex","endIndex","result","splice","removed","module","exports"],"mappings":"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","sourcesContent":["const ReactEasyState = require('react-easy-state')\nconst store = ReactEasyState.store\nconst _ = require('lodash')\nconst DisplayActions = require('../actions/display')\nconst shortid = require('shortid')\n\nconst updateDisplayThrottled = _.debounce((id, data) => {\n  return DisplayActions.updateDisplay(id, data)\n}, 300)\n\nconst display = store({\n  id: null,\n  name: null,\n  layout: null,\n  statusBar: null,\n  widgets: null,\n  async setId(id) {\n    if (!id) return\n    display.id = id\n    const displayInfo = await DisplayActions.getDisplay(id)\n    display.layout = displayInfo.layout\n    display.statusBar = displayInfo.statusBar\n    display.name = displayInfo.name\n    display.widgets = displayInfo.widgets\n  },\n  setName(name) {\n    if (!name) return\n    display.name = name\n  },\n  updateName(name) {\n    if (!name) return\n    display.name = name\n    updateDisplayThrottled(display.id, { name })\n  },\n  updateLayout(layout) {\n    if (!layout || !['spaced', 'compact'].includes(layout)) return\n    display.layout = layout\n    updateDisplayThrottled(display.id, { layout })\n  },\n  addStatusBarItem(type) {\n    display.statusBar = [...display.statusBar, type + '_' + shortid.generate()]\n    updateDisplayThrottled(display.id, { statusBar: display.statusBar })\n    return Promise.resolve()\n  },\n  removeStatusBarItem(id) {\n    display.statusBar = [...display.statusBar.slice(0, id).concat(display.statusBar.slice(id + 1))]\n    updateDisplayThrottled(display.id, { statusBar: display.statusBar })\n  },\n  reorderStatusBarItems(startIndex, endIndex) {\n    const result = Array.from(display.statusBar)\n    const [removed] = result.splice(startIndex, 1)\n    result.splice(endIndex, 0, removed)\n\n    display.statusBar = result\n    updateDisplayThrottled(display.id, { statusBar: display.statusBar })\n  }\n})\n\nmodule.exports = display\n"]},"metadata":{},"sourceType":"script"}