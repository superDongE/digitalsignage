{"ast":null,"code":"import _Reflect$construct from \"@babel/runtime-corejs2/core-js/reflect/construct\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = _Reflect$construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false; if (_Reflect$construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(_Reflect$construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPencilAlt } from '@fortawesome/free-solid-svg-icons';\nimport _ from 'lodash';\nimport { view } from 'react-easy-state';\nimport Frame from '../components/Admin/Frame.js';\nimport SlideList from '../components/Admin/SlideList.js';\nimport SlideEditDialog from '../components/Admin/SlideEditDialog';\nimport Upload from '../components/Upload.js';\nimport Button from '../components/Form/Button.js';\nimport Dialog from '../components/Dialog.js';\nimport { getSlideshow, updateSlideshow } from '../actions/slideshow';\nimport { protect } from '../helpers/auth.js';\nimport { display } from '../stores';\n\nvar updateSlideshowThrottled = _.debounce(function (id, data) {\n  return updateSlideshow(id, data);\n}, 300);\n\nvar Slideshow = /*#__PURE__*/function (_React$Component) {\n  _inherits(Slideshow, _React$Component);\n\n  var _super = _createSuper(Slideshow);\n\n  function Slideshow(props) {\n    var _this;\n\n    _classCallCheck(this, Slideshow);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"refresh\", function () {\n      var id = _this.props.slideshow._id;\n      return getSlideshow(id).then(function (slideshow) {\n        _this.setState({\n          slideshow: slideshow\n        }, function () {\n          _this.slideList && _this.slideList.current && _this.slideList.current.refresh();\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"openAddDialog\", function () {\n      return _Promise.resolve(_this.dialog && _this.dialog.current.open());\n    });\n\n    var _slideshow = props.slideshow;\n    _this.state = {\n      slideshow: _slideshow\n    };\n    _this.slideList = React.createRef();\n    _this.dialog = React.createRef();\n    return _this;\n  }\n\n  _createClass(Slideshow, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var displayId = this.props.displayId;\n      display.setId(displayId);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var loggedIn = this.props.loggedIn;\n      var slideshow = this.state.slideshow;\n      return /*#__PURE__*/React.createElement(Frame, {\n        loggedIn: loggedIn\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"jsx-2167527402\" + \" \" + 'title'\n      }, \"Slideshow: \"), ' ', /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-2167527402\" + \" \" + 'editable-title'\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        placeholder: \"\",\n        defalutvalue: slideshow && slideshow.title,\n        onChange: function onChange(event) {\n          var target = event.target;\n          var title = target && target.value;\n\n          _this2.setState({\n            slideshow: _objectSpread({}, slideshow, {\n              title: title\n            })\n          }, function () {\n            updateSlideshowThrottled(slideshow._id, {\n              title: title\n            });\n          });\n        },\n        onClick: function onClick(e) {\n          if (e) e.stopPropagation();\n        },\n        size: slideshow && slideshow.title && slideshow.title.length,\n        className: \"jsx-2167527402\" + \" \" + 'input'\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-2167527402\" + \" \" + 'icon'\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        icon: faPencilAlt,\n        fixedWidth: true,\n        color: \"#828282\"\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-2167527402\" + \" \" + 'wrapper'\n      }, /*#__PURE__*/React.createElement(Upload, {\n        slideshow: slideshow && slideshow._id,\n        refresh: this.refresh\n      }), /*#__PURE__*/React.createElement(SlideEditDialog, {\n        slideshow: slideshow && slideshow._id,\n        refresh: this.refresh,\n        ref: this.dialog\n      }), /*#__PURE__*/React.createElement(Button, {\n        text: \"+ \\uC2AC\\uB77C\\uC774\\uB4DC\\uC1FC \\uCD94\\uAC00\",\n        color: \"#334467\",\n        style: {\n          flex: 1,\n          margin: 0,\n          width: '100%',\n          marginTop: 20\n        },\n        onClick: this.openAddDialog\n      }), /*#__PURE__*/React.createElement(SlideList, {\n        ref: this.slideList,\n        slideshow: slideshow && slideshow._id\n      }), /*#__PURE__*/React.createElement(Dialog, null)), /*#__PURE__*/React.createElement(_JSXStyle, {\n        id: \"2167527402\"\n      }, \"h1.jsx-2167527402{font-family:'Open Sans',sans-serif;font-size:24px;color:#4f4f4f;margin:0px;}.title.jsx-2167527402{display:inline-block;}.editable-title.jsx-2167527402{display:inline-block;position:relative;margin-left:16px;margin-right:16px;border-bottom:3px solid #aaa;}.editable-title.jsx-2167527402 .input.jsx-2167527402{font-family:'Open Sans',sans-serif;color:#666;background-color:transparent;min-height:40px;border:none;outline:none;margin-right:24px;font-size:24px;font-weight:600;}.editable-title.jsx-2167527402 .icon.jsx-2167527402{position:absolute;right:8px;top:50%;margin-top:-8px;}.wrapper.jsx-2167527402{margin:40px auto;max-width:640px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcODIxMDNcXERlc2t0b3BcXGRpZ2l0YWxzaWduYWdlLW1hc3RlclxccGFnZXNcXHNsaWRlc2hvdy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE0R1csQUFHbUQsQUFNZixBQUdBLEFBT2UsQUFXbEIsQUFNRCxpQkFDRCxDQU5OLEdBckJaLEFBR29CLE9BbUJWLEtBTVYsRUFsQ2lCLEFBZ0JKLENBYUssR0FuQkMsT0FPWSxJQWhCZixFQTZCaEIsSUFuQm9CLFFBVFAsVUFVa0IsQ0FUL0IsQUFla0IsZ0JBQ0osWUFOZCxBQU9lLGFBQ0ssa0JBQ0gsZUFDQyxnQkFDbEIiLCJmaWxlIjoiQzpcXFVzZXJzXFw4MjEwM1xcRGVza3RvcFxcZGlnaXRhbHNpZ25hZ2UtbWFzdGVyXFxwYWdlc1xcc2xpZGVzaG93LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgRm9udEF3ZXNvbWVJY29uIH0gZnJvbSAnQGZvcnRhd2Vzb21lL3JlYWN0LWZvbnRhd2Vzb21lJ1xuaW1wb3J0IHsgZmFQZW5jaWxBbHQgfSBmcm9tICdAZm9ydGF3ZXNvbWUvZnJlZS1zb2xpZC1zdmctaWNvbnMnXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnXG5pbXBvcnQgeyB2aWV3IH0gZnJvbSAncmVhY3QtZWFzeS1zdGF0ZSdcblxuaW1wb3J0IEZyYW1lIGZyb20gJy4uL2NvbXBvbmVudHMvQWRtaW4vRnJhbWUuanMnXG5pbXBvcnQgU2xpZGVMaXN0IGZyb20gJy4uL2NvbXBvbmVudHMvQWRtaW4vU2xpZGVMaXN0LmpzJ1xuaW1wb3J0IFNsaWRlRWRpdERpYWxvZyBmcm9tICcuLi9jb21wb25lbnRzL0FkbWluL1NsaWRlRWRpdERpYWxvZydcbmltcG9ydCBVcGxvYWQgZnJvbSAnLi4vY29tcG9uZW50cy9VcGxvYWQuanMnXG5pbXBvcnQgQnV0dG9uIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybS9CdXR0b24uanMnXG5pbXBvcnQgRGlhbG9nIGZyb20gJy4uL2NvbXBvbmVudHMvRGlhbG9nLmpzJ1xuXG5pbXBvcnQgeyBnZXRTbGlkZXNob3csIHVwZGF0ZVNsaWRlc2hvdyB9IGZyb20gJy4uL2FjdGlvbnMvc2xpZGVzaG93J1xuaW1wb3J0IHsgcHJvdGVjdCB9IGZyb20gJy4uL2hlbHBlcnMvYXV0aC5qcydcbmltcG9ydCB7IGRpc3BsYXkgfSBmcm9tICcuLi9zdG9yZXMnXG5cbmNvbnN0IHVwZGF0ZVNsaWRlc2hvd1Rocm90dGxlZCA9IF8uZGVib3VuY2UoKGlkLCBkYXRhKSA9PiB7XG4gIHJldHVybiB1cGRhdGVTbGlkZXNob3coaWQsIGRhdGEpXG59LCAzMDApXG5cbmNsYXNzIFNsaWRlc2hvdyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgY29uc3QgeyBzbGlkZXNob3cgfSA9IHByb3BzXG4gICAgdGhpcy5zdGF0ZSA9IHsgc2xpZGVzaG93IH1cbiAgICB0aGlzLnNsaWRlTGlzdCA9IFJlYWN0LmNyZWF0ZVJlZigpXG4gICAgdGhpcy5kaWFsb2cgPSBSZWFjdC5jcmVhdGVSZWYoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldEluaXRpYWxQcm9wcyh7IHF1ZXJ5LCByZXEgfSkge1xuICAgIGNvbnN0IGlkID0gcXVlcnkgJiYgcXVlcnkuaWRcbiAgICBjb25zdCBob3N0ID1cbiAgICAgIHJlcSAmJiByZXEuaGVhZGVycyAmJiByZXEuaGVhZGVycy5ob3N0ID8gJ2h0dHA6Ly8nICsgcmVxLmhlYWRlcnMuaG9zdCA6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW5cbiAgICBjb25zdCBzbGlkZXNob3cgPSBpZCAmJiAoYXdhaXQgZ2V0U2xpZGVzaG93KGlkLCBob3N0KSlcbiAgICByZXR1cm4geyBzbGlkZXNob3csIGhvc3QgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgY29uc3QgeyBkaXNwbGF5SWQgfSA9IHRoaXMucHJvcHNcbiAgICBkaXNwbGF5LnNldElkKGRpc3BsYXlJZClcbiAgfVxuXG4gIHJlZnJlc2ggPSAoKSA9PiB7XG4gICAgY29uc3QgeyBfaWQ6IGlkIH0gPSB0aGlzLnByb3BzLnNsaWRlc2hvd1xuICAgIHJldHVybiBnZXRTbGlkZXNob3coaWQpLnRoZW4oc2xpZGVzaG93ID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBzbGlkZXNob3cgfSwgKCkgPT4ge1xuICAgICAgICB0aGlzLnNsaWRlTGlzdCAmJiB0aGlzLnNsaWRlTGlzdC5jdXJyZW50ICYmIHRoaXMuc2xpZGVMaXN0LmN1cnJlbnQucmVmcmVzaCgpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBvcGVuQWRkRGlhbG9nID0gKCkgPT4ge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5kaWFsb2cgJiYgdGhpcy5kaWFsb2cuY3VycmVudC5vcGVuKCkpXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBsb2dnZWRJbiB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgc2xpZGVzaG93IH0gPSB0aGlzLnN0YXRlXG4gICAgcmV0dXJuIChcbiAgICAgIDxGcmFtZSBsb2dnZWRJbj17bG9nZ2VkSW59PlxuICAgICAgICA8aDEgY2xhc3NOYW1lPSd0aXRsZSc+U2xpZGVzaG93OiA8L2gxPnsnICd9XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdlZGl0YWJsZS10aXRsZSc+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICBjbGFzc05hbWU9J2lucHV0J1xuICAgICAgICAgICAgcGxhY2Vob2xkZXI9JydcbiAgICAgICAgICAgIGRlZmFsdXR2YWx1ZT17c2xpZGVzaG93ICYmIHNsaWRlc2hvdy50aXRsZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtldmVudCA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldFxuICAgICAgICAgICAgICBjb25zdCB0aXRsZSA9IHRhcmdldCAmJiB0YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBzbGlkZXNob3c6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uc2xpZGVzaG93LFxuICAgICAgICAgICAgICAgICAgICB0aXRsZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgdXBkYXRlU2xpZGVzaG93VGhyb3R0bGVkKHNsaWRlc2hvdy5faWQsIHsgdGl0bGUgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBvbkNsaWNrPXtlID0+IHtcbiAgICAgICAgICAgICAgaWYgKGUpIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBzaXplPXtzbGlkZXNob3cgJiYgc2xpZGVzaG93LnRpdGxlICYmIHNsaWRlc2hvdy50aXRsZS5sZW5ndGh9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0naWNvbic+XG4gICAgICAgICAgICA8Rm9udEF3ZXNvbWVJY29uIGljb249e2ZhUGVuY2lsQWx0fSBmaXhlZFdpZHRoIGNvbG9yPScjODI4MjgyJyAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3dyYXBwZXInPlxuICAgICAgICAgIDxVcGxvYWQgc2xpZGVzaG93PXtzbGlkZXNob3cgJiYgc2xpZGVzaG93Ll9pZH0gcmVmcmVzaD17dGhpcy5yZWZyZXNofSAvPlxuICAgICAgICAgIDxTbGlkZUVkaXREaWFsb2dcbiAgICAgICAgICAgIHNsaWRlc2hvdz17c2xpZGVzaG93ICYmIHNsaWRlc2hvdy5faWR9XG4gICAgICAgICAgICByZWZyZXNoPXt0aGlzLnJlZnJlc2h9XG4gICAgICAgICAgICByZWY9e3RoaXMuZGlhbG9nfVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgdGV4dD0nKyDsiqzrnbzsnbTrk5zsh7wg7LaU6rCAJ1xuICAgICAgICAgICAgY29sb3I9JyMzMzQ0NjcnXG4gICAgICAgICAgICBzdHlsZT17eyBmbGV4OiAxLCBtYXJnaW46IDAsIHdpZHRoOiAnMTAwJScsIG1hcmdpblRvcDogMjAgfX1cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub3BlbkFkZERpYWxvZ31cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxTbGlkZUxpc3QgcmVmPXt0aGlzLnNsaWRlTGlzdH0gc2xpZGVzaG93PXtzbGlkZXNob3cgJiYgc2xpZGVzaG93Ll9pZH0gLz5cbiAgICAgICAgICA8RGlhbG9nIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgIHtgXG4gICAgICAgICAgICBoMSB7XG4gICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnT3BlbiBTYW5zJywgc2Fucy1zZXJpZjtcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAyNHB4O1xuICAgICAgICAgICAgICBjb2xvcjogIzRmNGY0ZjtcbiAgICAgICAgICAgICAgbWFyZ2luOiAwcHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAudGl0bGUge1xuICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuZWRpdGFibGUtdGl0bGUge1xuICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDE2cHg7XG4gICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMTZweDtcbiAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkICNhYWE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuZWRpdGFibGUtdGl0bGUgLmlucHV0IHtcbiAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdPcGVuIFNhbnMnLCBzYW5zLXNlcmlmO1xuICAgICAgICAgICAgICBjb2xvcjogIzY2NjtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDQwcHg7XG4gICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAyNHB4O1xuICAgICAgICAgICAgICBmb250LXNpemU6IDI0cHg7XG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuZWRpdGFibGUtdGl0bGUgLmljb24ge1xuICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgIHJpZ2h0OiA4cHg7XG4gICAgICAgICAgICAgIHRvcDogNTAlO1xuICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAtOHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLndyYXBwZXIge1xuICAgICAgICAgICAgICBtYXJnaW46IDQwcHggYXV0bztcbiAgICAgICAgICAgICAgbWF4LXdpZHRoOiA2NDBweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBgfVxuICAgICAgICA8L3N0eWxlPlxuICAgICAgPC9GcmFtZT5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgcHJvdGVjdCh2aWV3KFNsaWRlc2hvdykpXG4iXX0= */\\n/*@ sourceURL=C:\\\\Users\\\\82103\\\\Desktop\\\\digitalsignage-master\\\\pages\\\\slideshow.js */\"));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n        var query, req, id, host, slideshow;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                query = _ref.query, req = _ref.req;\n                id = query && query.id;\n                host = req && req.headers && req.headers.host ? 'http://' + req.headers.host : window.location.origin;\n                _context.t0 = id;\n\n                if (!_context.t0) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 7;\n                return getSlideshow(id, host);\n\n              case 7:\n                _context.t0 = _context.sent;\n\n              case 8:\n                slideshow = _context.t0;\n                return _context.abrupt(\"return\", {\n                  slideshow: slideshow,\n                  host: host\n                });\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Slideshow;\n}(React.Component);\n\nexport default protect(view(Slideshow));","map":{"version":3,"sources":["C:/Users/82103/Desktop/digitalsignage-master/pages/slideshow.js"],"names":["React","FontAwesomeIcon","faPencilAlt","_","view","Frame","SlideList","SlideEditDialog","Upload","Button","Dialog","getSlideshow","updateSlideshow","protect","display","updateSlideshowThrottled","debounce","id","data","Slideshow","props","slideshow","_id","then","setState","slideList","current","refresh","resolve","dialog","open","state","createRef","displayId","setId","loggedIn","title","event","target","value","e","stopPropagation","length","flex","margin","width","marginTop","openAddDialog","query","req","host","headers","window","location","origin","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPencilAlt } from '@fortawesome/free-solid-svg-icons'\nimport _ from 'lodash'\nimport { view } from 'react-easy-state'\n\nimport Frame from '../components/Admin/Frame.js'\nimport SlideList from '../components/Admin/SlideList.js'\nimport SlideEditDialog from '../components/Admin/SlideEditDialog'\nimport Upload from '../components/Upload.js'\nimport Button from '../components/Form/Button.js'\nimport Dialog from '../components/Dialog.js'\n\nimport { getSlideshow, updateSlideshow } from '../actions/slideshow'\nimport { protect } from '../helpers/auth.js'\nimport { display } from '../stores'\n\nconst updateSlideshowThrottled = _.debounce((id, data) => {\n  return updateSlideshow(id, data)\n}, 300)\n\nclass Slideshow extends React.Component {\n  constructor(props) {\n    super(props)\n    const { slideshow } = props\n    this.state = { slideshow }\n    this.slideList = React.createRef()\n    this.dialog = React.createRef()\n  }\n\n  static async getInitialProps({ query, req }) {\n    const id = query && query.id\n    const host =\n      req && req.headers && req.headers.host ? 'http://' + req.headers.host : window.location.origin\n    const slideshow = id && (await getSlideshow(id, host))\n    return { slideshow, host }\n  }\n\n  componentDidMount() {\n    const { displayId } = this.props\n    display.setId(displayId)\n  }\n\n  refresh = () => {\n    const { _id: id } = this.props.slideshow\n    return getSlideshow(id).then(slideshow => {\n      this.setState({ slideshow }, () => {\n        this.slideList && this.slideList.current && this.slideList.current.refresh()\n      })\n    })\n  }\n\n  openAddDialog = () => {\n    return Promise.resolve(this.dialog && this.dialog.current.open())\n  }\n\n  render() {\n    const { loggedIn } = this.props\n    const { slideshow } = this.state\n    return (\n      <Frame loggedIn={loggedIn}>\n        <h1 className='title'>Slideshow: </h1>{' '}\n        <div className='editable-title'>\n          <input\n            className='input'\n            placeholder=''\n            defalutvalue={slideshow && slideshow.title}\n            onChange={event => {\n              const target = event.target\n              const title = target && target.value\n              this.setState(\n                {\n                  slideshow: {\n                    ...slideshow,\n                    title\n                  }\n                },\n                () => {\n                  updateSlideshowThrottled(slideshow._id, { title })\n                }\n              )\n            }}\n            onClick={e => {\n              if (e) e.stopPropagation()\n            }}\n            size={slideshow && slideshow.title && slideshow.title.length}\n          />\n          <div className='icon'>\n            <FontAwesomeIcon icon={faPencilAlt} fixedWidth color='#828282' />\n          </div>\n        </div>\n        <div className='wrapper'>\n          <Upload slideshow={slideshow && slideshow._id} refresh={this.refresh} />\n          <SlideEditDialog\n            slideshow={slideshow && slideshow._id}\n            refresh={this.refresh}\n            ref={this.dialog}\n          />\n          <Button\n            text='+ 슬라이드쇼 추가'\n            color='#334467'\n            style={{ flex: 1, margin: 0, width: '100%', marginTop: 20 }}\n            onClick={this.openAddDialog}\n          />\n          <SlideList ref={this.slideList} slideshow={slideshow && slideshow._id} />\n          <Dialog />\n        </div>\n        <style jsx>\n          {`\n            h1 {\n              font-family: 'Open Sans', sans-serif;\n              font-size: 24px;\n              color: #4f4f4f;\n              margin: 0px;\n            }\n            .title {\n              display: inline-block;\n            }\n            .editable-title {\n              display: inline-block;\n              position: relative;\n              margin-left: 16px;\n              margin-right: 16px;\n              border-bottom: 3px solid #aaa;\n            }\n            .editable-title .input {\n              font-family: 'Open Sans', sans-serif;\n              color: #666;\n              background-color: transparent;\n              min-height: 40px;\n              border: none;\n              outline: none;\n              margin-right: 24px;\n              font-size: 24px;\n              font-weight: 600;\n            }\n            .editable-title .icon {\n              position: absolute;\n              right: 8px;\n              top: 50%;\n              margin-top: -8px;\n            }\n            .wrapper {\n              margin: 40px auto;\n              max-width: 640px;\n            }\n          `}\n        </style>\n      </Frame>\n    )\n  }\n}\n\nexport default protect(view(Slideshow))\n"]},"metadata":{},"sourceType":"module"}