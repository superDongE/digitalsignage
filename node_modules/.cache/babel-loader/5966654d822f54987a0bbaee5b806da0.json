{"ast":null,"code":"import _Reflect$construct from \"@babel/runtime-corejs2/core-js/reflect/construct\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = _Reflect$construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false; if (_Reflect$construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(_Reflect$construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/**\n * @fileoverview Slideshow component that given an array of slide descriptions\n * of mixed types, renders the slides and automatically plays the slideshow for\n * the given durations\n */\nimport React, { Component } from 'react';\nimport _ from 'lodash';\nimport GenericSlide from './Slide/Generic';\nimport PhotoSlide from './Slide/Photo';\nimport YoutubeSlide from './Slide/Youtube';\nimport WebSlide from './Slide/Web';\nimport VideoSlide from './Slide/video';\nimport Progress from './Progress';\nimport { getSlides } from '../../../actions/slide';\nvar DEFAULT_DURATION = 5000;\n\nvar Slideshow = /*#__PURE__*/function (_Component) {\n  _inherits(Slideshow, _Component);\n\n  var _super = _createSuper(Slideshow);\n\n  function Slideshow(props) {\n    var _this;\n\n    _classCallCheck(this, Slideshow);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"nextSlide\", function () {\n      var _this$state = _this.state,\n          current = _this$state.current,\n          slides = _this$state.slides;\n      return new _Promise(function (resolve) {\n        _this.setState({\n          current: (current + 1) % slides.length\n        }, function () {\n          var current = _this.state.current;\n          var prev = ((current - 1) % slides.length + slides.length) % slides.length;\n\n          _this.slideRefs[prev].stop();\n\n          _this.slideRefs[current].play();\n\n          resolve();\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"waitForNextSlide\", function () {\n      var _this$props$defaultDu = _this.props.defaultDuration,\n          defaultDuration = _this$props$defaultDu === void 0 ? DEFAULT_DURATION : _this$props$defaultDu;\n      var current = _this.state.current;\n      var currentSlide = _this.orderedSlides[current];\n\n      _this.setState({\n        ready: false\n      }, function () {\n        _this.slideRefs[current] && _this.slideRefs[current].loadedPromise.then(function () {\n          _this.setState({\n            ready: true\n          });\n\n          setTimeout(function () {\n            return _this.nextSlide().then(function () {\n              _this.waitForNextSlide();\n            });\n          }, currentSlide && currentSlide.duration * 1000 || defaultDuration);\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getSlideComponent\", function (type) {\n      switch (type) {\n        case 'photo':\n          return PhotoSlide;\n\n        case 'youtube':\n          return YoutubeSlide;\n\n        case 'video':\n          return VideoSlide;\n\n        case 'web':\n          return WebSlide;\n\n        default:\n          return GenericSlide;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderSlide\", function (slide, index) {\n      var current = _this.state.current;\n      var type = slide.type;\n\n      var SlideComponent = _this.getSlideComponent(type);\n\n      return /*#__PURE__*/React.createElement(SlideComponent, {\n        key: index,\n        slide: slide,\n        show: index == current,\n        ref: function ref(_ref) {\n          return _this.slideRefs[index] = _ref;\n        }\n      });\n    });\n\n    _this.slideRefs = [];\n    _this.state = {\n      current: null,\n      slides: [],\n      ready: false\n    };\n    return _this;\n  }\n\n  _createClass(Slideshow, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var data = this.props.data;\n      getSlides(data).then(function (slides) {\n        _this2.setState({\n          current: 0,\n          slides: slides\n        }, _this2.waitForNextSlide);\n      });\n    }\n    /**\n     * Sorts the slides by the given `order` value of each slide and returns the\n     * slides array in the sorted order\n     * @return {Array}\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props$defaultDu2 = this.props.defaultDuration,\n          defaultDuration = _this$props$defaultDu2 === void 0 ? DEFAULT_DURATION : _this$props$defaultDu2;\n      var _this$state2 = this.state,\n          current = _this$state2.current,\n          ready = _this$state2.ready;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-3275717764\" + \" \" + 'slideshow'\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-3275717764\" + \" \" + 'slideshow-wrapper'\n      }, this.orderedSlides.map(function (slide, index) {\n        return _this3.renderSlide(slide, index);\n      })), /*#__PURE__*/React.createElement(Progress, {\n        defaultDuration: defaultDuration,\n        current: current,\n        orderedSlides: this.orderedSlides,\n        ready: ready\n      }), /*#__PURE__*/React.createElement(_JSXStyle, {\n        id: \"3275717764\"\n      }, \".slideshow.jsx-3275717764{display:block;position:relative;-webkit-flex:1;-ms-flex:1;flex:1;overflow:hidden;width:100%;height:100%;}.slideshow-wrapper.jsx-3275717764{position:relative;width:100%;height:100%;overflow:hidden;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcdXNlclxcRGVza3RvcFxcZGlnaXRhbHNpZ25hZ2UtbWFzdGVyXFx3aWRnZXRzXFxzbGlkZXNob3dcXHNyY1xcU2xpZGVzaG93LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTZJVyxBQUc2QixBQVFJLGNBUEEsSUFRUCxXQUNDLEdBUkwsU0FTUyxnQkFDbEIsUUFUa0IsZ0JBQ0wsV0FDQyxZQUNkIiwiZmlsZSI6IkM6XFxVc2Vyc1xcdXNlclxcRGVza3RvcFxcZGlnaXRhbHNpZ25hZ2UtbWFzdGVyXFx3aWRnZXRzXFxzbGlkZXNob3dcXHNyY1xcU2xpZGVzaG93LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFNsaWRlc2hvdyBjb21wb25lbnQgdGhhdCBnaXZlbiBhbiBhcnJheSBvZiBzbGlkZSBkZXNjcmlwdGlvbnNcbiAqIG9mIG1peGVkIHR5cGVzLCByZW5kZXJzIHRoZSBzbGlkZXMgYW5kIGF1dG9tYXRpY2FsbHkgcGxheXMgdGhlIHNsaWRlc2hvdyBmb3JcbiAqIHRoZSBnaXZlbiBkdXJhdGlvbnNcbiAqL1xuXG5pbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnXG5cbmltcG9ydCBHZW5lcmljU2xpZGUgZnJvbSAnLi9TbGlkZS9HZW5lcmljJ1xuaW1wb3J0IFBob3RvU2xpZGUgZnJvbSAnLi9TbGlkZS9QaG90bydcbmltcG9ydCBZb3V0dWJlU2xpZGUgZnJvbSAnLi9TbGlkZS9Zb3V0dWJlJ1xuaW1wb3J0IFdlYlNsaWRlIGZyb20gJy4vU2xpZGUvV2ViJ1xuaW1wb3J0IFZpZGVvU2xpZGUgZnJvbSAnLi9TbGlkZS92aWRlbydcbmltcG9ydCBQcm9ncmVzcyBmcm9tICcuL1Byb2dyZXNzJ1xuXG5pbXBvcnQgeyBnZXRTbGlkZXMgfSBmcm9tICcuLi8uLi8uLi9hY3Rpb25zL3NsaWRlJ1xuXG5jb25zdCBERUZBVUxUX0RVUkFUSU9OID0gNTAwMFxuXG5jbGFzcyBTbGlkZXNob3cgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuXG4gICAgdGhpcy5zbGlkZVJlZnMgPSBbXVxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGN1cnJlbnQ6IG51bGwsXG4gICAgICBzbGlkZXM6IFtdLFxuICAgICAgcmVhZHk6IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgY29uc3QgeyBkYXRhIH0gPSB0aGlzLnByb3BzXG4gICAgZ2V0U2xpZGVzKGRhdGEpLnRoZW4oc2xpZGVzID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBjdXJyZW50OiAwLCBzbGlkZXMgfSwgdGhpcy53YWl0Rm9yTmV4dFNsaWRlKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogU29ydHMgdGhlIHNsaWRlcyBieSB0aGUgZ2l2ZW4gYG9yZGVyYCB2YWx1ZSBvZiBlYWNoIHNsaWRlIGFuZCByZXR1cm5zIHRoZVxuICAgKiBzbGlkZXMgYXJyYXkgaW4gdGhlIHNvcnRlZCBvcmRlclxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIGdldCBvcmRlcmVkU2xpZGVzKCkge1xuICAgIGNvbnN0IHsgc2xpZGVzIH0gPSB0aGlzLnN0YXRlXG4gICAgcmV0dXJuIF8uc29ydEJ5KHNsaWRlcywgJ29yZGVyJylcbiAgfVxuXG4gIC8qKlxuICAgKiBNb3ZlcyB0byB0aGUgbmV4dCBzbGlkZSAoYW5kIGxvb3BzIGJhY2sgaWYgb24gdGhlIGxhc3Qgc2xpZGUpXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICBuZXh0U2xpZGUgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBjdXJyZW50LCBzbGlkZXMgfSA9IHRoaXMuc3RhdGVcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKFxuICAgICAgICB7XG4gICAgICAgICAgY3VycmVudDogKGN1cnJlbnQgKyAxKSAlIHNsaWRlcy5sZW5ndGhcbiAgICAgICAgfSxcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgY3VycmVudCB9ID0gdGhpcy5zdGF0ZVxuICAgICAgICAgIGNvbnN0IHByZXYgPSAoKChjdXJyZW50IC0gMSkgJSBzbGlkZXMubGVuZ3RoKSArIHNsaWRlcy5sZW5ndGgpICUgc2xpZGVzLmxlbmd0aFxuICAgICAgICAgIHRoaXMuc2xpZGVSZWZzW3ByZXZdLnN0b3AoKVxuICAgICAgICAgIHRoaXMuc2xpZGVSZWZzW2N1cnJlbnRdLnBsYXkoKVxuICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICB9XG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBXYWl0cyBmb3IgdGhlIGR1cmF0aW9uIHNwZWNpZmllZCBieSBlYWNoIHNsaWRlIHRoZW4gbW92ZXMgdG8gdGhlIG5leHQgc2xpZGVcbiAgICogYW5kIHdhaXRzIGFnYWluXG4gICAqL1xuICB3YWl0Rm9yTmV4dFNsaWRlID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgZGVmYXVsdER1cmF0aW9uID0gREVGQVVMVF9EVVJBVElPTiB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgY3VycmVudCB9ID0gdGhpcy5zdGF0ZVxuICAgIGNvbnN0IGN1cnJlbnRTbGlkZSA9IHRoaXMub3JkZXJlZFNsaWRlc1tjdXJyZW50XVxuICAgIHRoaXMuc2V0U3RhdGUoeyByZWFkeTogZmFsc2UgfSwgKCkgPT4ge1xuICAgICAgdGhpcy5zbGlkZVJlZnNbY3VycmVudF0gJiZcbiAgICAgICAgdGhpcy5zbGlkZVJlZnNbY3VycmVudF0ubG9hZGVkUHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgcmVhZHk6IHRydWUgfSlcbiAgICAgICAgICBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgKCkgPT5cbiAgICAgICAgICAgICAgdGhpcy5uZXh0U2xpZGUoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndhaXRGb3JOZXh0U2xpZGUoKVxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIChjdXJyZW50U2xpZGUgJiYgY3VycmVudFNsaWRlLmR1cmF0aW9uICogMTAwMCkgfHwgZGVmYXVsdER1cmF0aW9uXG4gICAgICAgICAgKVxuICAgICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBnZXRTbGlkZUNvbXBvbmVudCA9IHR5cGUgPT4ge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAncGhvdG8nOlxuICAgICAgICByZXR1cm4gUGhvdG9TbGlkZVxuICAgICAgY2FzZSAneW91dHViZSc6XG4gICAgICAgIHJldHVybiBZb3V0dWJlU2xpZGVcbiAgICAgIGNhc2UgJ3ZpZGVvJzpcbiAgICAgICAgcmV0dXJuIFZpZGVvU2xpZGVcbiAgICAgIGNhc2UgJ3dlYic6XG4gICAgICAgIHJldHVybiBXZWJTbGlkZVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEdlbmVyaWNTbGlkZVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlclNsaWRlID0gKHNsaWRlLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IHsgY3VycmVudCB9ID0gdGhpcy5zdGF0ZVxuICAgIGNvbnN0IHsgdHlwZSB9ID0gc2xpZGVcblxuICAgIGNvbnN0IFNsaWRlQ29tcG9uZW50ID0gdGhpcy5nZXRTbGlkZUNvbXBvbmVudCh0eXBlKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxTbGlkZUNvbXBvbmVudFxuICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICBzbGlkZT17c2xpZGV9XG4gICAgICAgIHNob3c9e2luZGV4ID09IGN1cnJlbnR9XG4gICAgICAgIHJlZj17cmVmID0+ICh0aGlzLnNsaWRlUmVmc1tpbmRleF0gPSByZWYpfVxuICAgICAgLz5cbiAgICApXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBkZWZhdWx0RHVyYXRpb24gPSBERUZBVUxUX0RVUkFUSU9OIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyBjdXJyZW50LCByZWFkeSB9ID0gdGhpcy5zdGF0ZVxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nc2xpZGVzaG93Jz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NsaWRlc2hvdy13cmFwcGVyJz5cbiAgICAgICAgICB7dGhpcy5vcmRlcmVkU2xpZGVzLm1hcCgoc2xpZGUsIGluZGV4KSA9PiB0aGlzLnJlbmRlclNsaWRlKHNsaWRlLCBpbmRleCkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPFByb2dyZXNzXG4gICAgICAgICAgZGVmYXVsdER1cmF0aW9uPXtkZWZhdWx0RHVyYXRpb259XG4gICAgICAgICAgY3VycmVudD17Y3VycmVudH1cbiAgICAgICAgICBvcmRlcmVkU2xpZGVzPXt0aGlzLm9yZGVyZWRTbGlkZXN9XG4gICAgICAgICAgcmVhZHk9e3JlYWR5fVxuICAgICAgICAvPlxuICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgIHtgXG4gICAgICAgICAgICAuc2xpZGVzaG93IHtcbiAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5zbGlkZXNob3ctd3JhcHBlciB7XG4gICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBgfVxuICAgICAgICA8L3N0eWxlPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNsaWRlc2hvd1xuIl19 */\\n/*@ sourceURL=C:\\\\Users\\\\user\\\\Desktop\\\\digitalsignage-master\\\\widgets\\\\slideshow\\\\src\\\\Slideshow.js */\"));\n    }\n  }, {\n    key: \"orderedSlides\",\n    get: function get() {\n      var slides = this.state.slides;\n      return _.sortBy(slides, 'order');\n    }\n    /**\n     * Moves to the next slide (and loops back if on the last slide)\n     * @return {Promise}\n     */\n\n  }]);\n\n  return Slideshow;\n}(Component);\n\nexport default Slideshow;","map":{"version":3,"sources":["C:/Users/user/Desktop/digitalsignage-master/widgets/slideshow/src/Slideshow.js"],"names":["React","Component","_","GenericSlide","PhotoSlide","YoutubeSlide","WebSlide","VideoSlide","Progress","getSlides","DEFAULT_DURATION","Slideshow","props","state","current","slides","resolve","setState","length","prev","slideRefs","stop","play","defaultDuration","currentSlide","orderedSlides","ready","loadedPromise","then","setTimeout","nextSlide","waitForNextSlide","duration","type","slide","index","SlideComponent","getSlideComponent","ref","data","map","renderSlide","sortBy"],"mappings":"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","sourcesContent":["/**\n * @fileoverview Slideshow component that given an array of slide descriptions\n * of mixed types, renders the slides and automatically plays the slideshow for\n * the given durations\n */\n\nimport React, { Component } from 'react'\nimport _ from 'lodash'\n\nimport GenericSlide from './Slide/Generic'\nimport PhotoSlide from './Slide/Photo'\nimport YoutubeSlide from './Slide/Youtube'\nimport WebSlide from './Slide/Web'\nimport VideoSlide from './Slide/video'\nimport Progress from './Progress'\n\nimport { getSlides } from '../../../actions/slide'\n\nconst DEFAULT_DURATION = 5000\n\nclass Slideshow extends Component {\n  constructor(props) {\n    super(props)\n\n    this.slideRefs = []\n\n    this.state = {\n      current: null,\n      slides: [],\n      ready: false\n    }\n  }\n\n  componentDidMount() {\n    const { data } = this.props\n    getSlides(data).then(slides => {\n      this.setState({ current: 0, slides }, this.waitForNextSlide)\n    })\n  }\n\n  /**\n   * Sorts the slides by the given `order` value of each slide and returns the\n   * slides array in the sorted order\n   * @return {Array}\n   */\n  get orderedSlides() {\n    const { slides } = this.state\n    return _.sortBy(slides, 'order')\n  }\n\n  /**\n   * Moves to the next slide (and loops back if on the last slide)\n   * @return {Promise}\n   */\n  nextSlide = () => {\n    const { current, slides } = this.state\n    return new Promise(resolve => {\n      this.setState(\n        {\n          current: (current + 1) % slides.length\n        },\n        () => {\n          const { current } = this.state\n          const prev = (((current - 1) % slides.length) + slides.length) % slides.length\n          this.slideRefs[prev].stop()\n          this.slideRefs[current].play()\n          resolve()\n        }\n      )\n    })\n  }\n\n  /**\n   * Waits for the duration specified by each slide then moves to the next slide\n   * and waits again\n   */\n  waitForNextSlide = () => {\n    const { defaultDuration = DEFAULT_DURATION } = this.props\n    const { current } = this.state\n    const currentSlide = this.orderedSlides[current]\n    this.setState({ ready: false }, () => {\n      this.slideRefs[current] &&\n        this.slideRefs[current].loadedPromise.then(() => {\n          this.setState({ ready: true })\n          setTimeout(\n            () =>\n              this.nextSlide().then(() => {\n                this.waitForNextSlide()\n              }),\n            (currentSlide && currentSlide.duration * 1000) || defaultDuration\n          )\n        })\n    })\n  }\n\n  getSlideComponent = type => {\n    switch (type) {\n      case 'photo':\n        return PhotoSlide\n      case 'youtube':\n        return YoutubeSlide\n      case 'video':\n        return VideoSlide\n      case 'web':\n        return WebSlide\n      default:\n        return GenericSlide\n    }\n  }\n\n  renderSlide = (slide, index) => {\n    const { current } = this.state\n    const { type } = slide\n\n    const SlideComponent = this.getSlideComponent(type)\n\n    return (\n      <SlideComponent\n        key={index}\n        slide={slide}\n        show={index == current}\n        ref={ref => (this.slideRefs[index] = ref)}\n      />\n    )\n  }\n\n  render() {\n    const { defaultDuration = DEFAULT_DURATION } = this.props\n    const { current, ready } = this.state\n    return (\n      <div className='slideshow'>\n        <div className='slideshow-wrapper'>\n          {this.orderedSlides.map((slide, index) => this.renderSlide(slide, index))}\n        </div>\n        <Progress\n          defaultDuration={defaultDuration}\n          current={current}\n          orderedSlides={this.orderedSlides}\n          ready={ready}\n        />\n        <style jsx>\n          {`\n            .slideshow {\n              display: block;\n              position: relative;\n              flex: 1;\n              overflow: hidden;\n              width: 100%;\n              height: 100%;\n            }\n            .slideshow-wrapper {\n              position: relative;\n              width: 100%;\n              height: 100%;\n              overflow: hidden;\n            }\n          `}\n        </style>\n      </div>\n    )\n  }\n}\n\nexport default Slideshow\n"]},"metadata":{},"sourceType":"module"}