{"ast":null,"code":"import _Reflect$construct from \"@babel/runtime-corejs2/core-js/reflect/construct\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = _Reflect$construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false; if (_Reflect$construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(_Reflect$construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/**\n * @fileoverview Slideshow component that given an array of slide descriptions\n * of mixed types, renders the slides and automatically plays the slideshow for\n * the given durations\n */\nimport React, { Component } from 'react';\nimport _ from 'lodash';\nimport GenericSlide from './Slide/Generic';\nimport PhotoSlide from './Slide/Photo';\nimport YoutubeSlide from './Slide/Youtube';\nimport WebSlide from './Slide/Web';\nimport Progress from './Progress';\nimport { getSlides } from '../../../actions/slide';\nvar DEFAULT_DURATION = 5000;\n\nvar Slideshow = /*#__PURE__*/function (_Component) {\n  _inherits(Slideshow, _Component);\n\n  var _super = _createSuper(Slideshow);\n\n  function Slideshow(props) {\n    var _this;\n\n    _classCallCheck(this, Slideshow);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"nextSlide\", function () {\n      var _this$state = _this.state,\n          current = _this$state.current,\n          slides = _this$state.slides;\n      return new _Promise(function (resolve) {\n        _this.setState({\n          current: (current + 1) % slides.length\n        }, function () {\n          var current = _this.state.current;\n          var prev = ((current - 1) % slides.length + slides.length) % slides.length;\n\n          _this.slideRefs[prev].stop();\n\n          _this.slideRefs[current].play();\n\n          resolve();\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"waitForNextSlide\", function () {\n      var _this$props$defaultDu = _this.props.defaultDuration,\n          defaultDuration = _this$props$defaultDu === void 0 ? DEFAULT_DURATION : _this$props$defaultDu;\n      var current = _this.state.current;\n      var currentSlide = _this.orderedSlides[current];\n\n      _this.setState({\n        ready: false\n      }, function () {\n        _this.slideRefs[current] && _this.slideRefs[current].loadedPromise.then(function () {\n          _this.setState({\n            ready: true\n          });\n\n          setTimeout(function () {\n            return _this.nextSlide().then(function () {\n              _this.waitForNextSlide();\n            });\n          }, currentSlide && currentSlide.duration * 1000 || defaultDuration);\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getSlideComponent\", function (type) {\n      switch (type) {\n        case 'photo':\n          return PhotoSlide;\n\n        case 'youtube':\n          return YoutubeSlide;\n\n        case 'web':\n          return WebSlide;\n\n        default:\n          return GenericSlide;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderSlide\", function (slide, index) {\n      var current = _this.state.current;\n      var type = slide.type;\n\n      var SlideComponent = _this.getSlideComponent(type);\n\n      return /*#__PURE__*/React.createElement(SlideComponent, {\n        key: index,\n        slide: slide,\n        show: index == current,\n        ref: function ref(_ref) {\n          return _this.slideRefs[index] = _ref;\n        }\n      });\n    });\n\n    _this.slideRefs = [];\n    _this.state = {\n      current: null,\n      slides: [],\n      ready: false\n    };\n    return _this;\n  }\n\n  _createClass(Slideshow, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var data = this.props.data;\n      getSlides(data).then(function (slides) {\n        _this2.setState({\n          current: 0,\n          slides: slides\n        }, _this2.waitForNextSlide);\n      });\n    }\n    /**\n     * Sorts the slides by the given `order` value of each slide and returns the\n     * slides array in the sorted order\n     * @return {Array}\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props$defaultDu2 = this.props.defaultDuration,\n          defaultDuration = _this$props$defaultDu2 === void 0 ? DEFAULT_DURATION : _this$props$defaultDu2;\n      var _this$state2 = this.state,\n          current = _this$state2.current,\n          ready = _this$state2.ready;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-3275717764\" + \" \" + 'slideshow'\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-3275717764\" + \" \" + 'slideshow-wrapper'\n      }, this.orderedSlides.map(function (slide, index) {\n        return _this3.renderSlide(slide, index);\n      })), /*#__PURE__*/React.createElement(Progress, {\n        defaultDuration: defaultDuration,\n        current: current,\n        orderedSlides: this.orderedSlides,\n        ready: ready\n      }), /*#__PURE__*/React.createElement(_JSXStyle, {\n        id: \"3275717764\"\n      }, \".slideshow.jsx-3275717764{display:block;position:relative;-webkit-flex:1;-ms-flex:1;flex:1;overflow:hidden;width:100%;height:100%;}.slideshow-wrapper.jsx-3275717764{position:relative;width:100%;height:100%;overflow:hidden;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcdXNlclxcRGVza3RvcFxccHJvamVjdFxcZGlnaXRhbHNpZ25hZ2UtbWFzdGVyICgyKVxcZGlnaXRhbHNpZ25hZ2UtbWFzdGVyXFx3aWRnZXRzXFxzbGlkZXNob3dcXHNyY1xcU2xpZGVzaG93LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTBJVyxBQUc2QixBQVFJLGNBUEEsSUFRUCxXQUNDLEdBUkwsU0FTUyxnQkFDbEIsUUFUa0IsZ0JBQ0wsV0FDQyxZQUNkIiwiZmlsZSI6IkM6XFxVc2Vyc1xcdXNlclxcRGVza3RvcFxccHJvamVjdFxcZGlnaXRhbHNpZ25hZ2UtbWFzdGVyICgyKVxcZGlnaXRhbHNpZ25hZ2UtbWFzdGVyXFx3aWRnZXRzXFxzbGlkZXNob3dcXHNyY1xcU2xpZGVzaG93LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFNsaWRlc2hvdyBjb21wb25lbnQgdGhhdCBnaXZlbiBhbiBhcnJheSBvZiBzbGlkZSBkZXNjcmlwdGlvbnNcbiAqIG9mIG1peGVkIHR5cGVzLCByZW5kZXJzIHRoZSBzbGlkZXMgYW5kIGF1dG9tYXRpY2FsbHkgcGxheXMgdGhlIHNsaWRlc2hvdyBmb3JcbiAqIHRoZSBnaXZlbiBkdXJhdGlvbnNcbiAqL1xuXG5pbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnXG5cbmltcG9ydCBHZW5lcmljU2xpZGUgZnJvbSAnLi9TbGlkZS9HZW5lcmljJ1xuaW1wb3J0IFBob3RvU2xpZGUgZnJvbSAnLi9TbGlkZS9QaG90bydcbmltcG9ydCBZb3V0dWJlU2xpZGUgZnJvbSAnLi9TbGlkZS9Zb3V0dWJlJ1xuaW1wb3J0IFdlYlNsaWRlIGZyb20gJy4vU2xpZGUvV2ViJ1xuaW1wb3J0IFByb2dyZXNzIGZyb20gJy4vUHJvZ3Jlc3MnXG5cbmltcG9ydCB7IGdldFNsaWRlcyB9IGZyb20gJy4uLy4uLy4uL2FjdGlvbnMvc2xpZGUnXG5cbmNvbnN0IERFRkFVTFRfRFVSQVRJT04gPSA1MDAwXG5cbmNsYXNzIFNsaWRlc2hvdyBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG5cbiAgICB0aGlzLnNsaWRlUmVmcyA9IFtdXG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgY3VycmVudDogbnVsbCxcbiAgICAgIHNsaWRlczogW10sXG4gICAgICByZWFkeTogZmFsc2VcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXMucHJvcHNcbiAgICBnZXRTbGlkZXMoZGF0YSkudGhlbihzbGlkZXMgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGN1cnJlbnQ6IDAsIHNsaWRlcyB9LCB0aGlzLndhaXRGb3JOZXh0U2xpZGUpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBTb3J0cyB0aGUgc2xpZGVzIGJ5IHRoZSBnaXZlbiBgb3JkZXJgIHZhbHVlIG9mIGVhY2ggc2xpZGUgYW5kIHJldHVybnMgdGhlXG4gICAqIHNsaWRlcyBhcnJheSBpbiB0aGUgc29ydGVkIG9yZGVyXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgZ2V0IG9yZGVyZWRTbGlkZXMoKSB7XG4gICAgY29uc3QgeyBzbGlkZXMgfSA9IHRoaXMuc3RhdGVcbiAgICByZXR1cm4gXy5zb3J0Qnkoc2xpZGVzLCAnb3JkZXInKVxuICB9XG5cbiAgLyoqXG4gICAqIE1vdmVzIHRvIHRoZSBuZXh0IHNsaWRlIChhbmQgbG9vcHMgYmFjayBpZiBvbiB0aGUgbGFzdCBzbGlkZSlcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIG5leHRTbGlkZSA9ICgpID0+IHtcbiAgICBjb25zdCB7IGN1cnJlbnQsIHNsaWRlcyB9ID0gdGhpcy5zdGF0ZVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoXG4gICAgICAgIHtcbiAgICAgICAgICBjdXJyZW50OiAoY3VycmVudCArIDEpICUgc2xpZGVzLmxlbmd0aFxuICAgICAgICB9LFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBjdXJyZW50IH0gPSB0aGlzLnN0YXRlXG4gICAgICAgICAgY29uc3QgcHJldiA9ICgoKGN1cnJlbnQgLSAxKSAlIHNsaWRlcy5sZW5ndGgpICsgc2xpZGVzLmxlbmd0aCkgJSBzbGlkZXMubGVuZ3RoXG4gICAgICAgICAgdGhpcy5zbGlkZVJlZnNbcHJldl0uc3RvcCgpXG4gICAgICAgICAgdGhpcy5zbGlkZVJlZnNbY3VycmVudF0ucGxheSgpXG4gICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFdhaXRzIGZvciB0aGUgZHVyYXRpb24gc3BlY2lmaWVkIGJ5IGVhY2ggc2xpZGUgdGhlbiBtb3ZlcyB0byB0aGUgbmV4dCBzbGlkZVxuICAgKiBhbmQgd2FpdHMgYWdhaW5cbiAgICovXG4gIHdhaXRGb3JOZXh0U2xpZGUgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBkZWZhdWx0RHVyYXRpb24gPSBERUZBVUxUX0RVUkFUSU9OIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyBjdXJyZW50IH0gPSB0aGlzLnN0YXRlXG4gICAgY29uc3QgY3VycmVudFNsaWRlID0gdGhpcy5vcmRlcmVkU2xpZGVzW2N1cnJlbnRdXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHJlYWR5OiBmYWxzZSB9LCAoKSA9PiB7XG4gICAgICB0aGlzLnNsaWRlUmVmc1tjdXJyZW50XSAmJlxuICAgICAgICB0aGlzLnNsaWRlUmVmc1tjdXJyZW50XS5sb2FkZWRQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyByZWFkeTogdHJ1ZSB9KVxuICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAoKSA9PlxuICAgICAgICAgICAgICB0aGlzLm5leHRTbGlkZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud2FpdEZvck5leHRTbGlkZSgpXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKGN1cnJlbnRTbGlkZSAmJiBjdXJyZW50U2xpZGUuZHVyYXRpb24gKiAxMDAwKSB8fCBkZWZhdWx0RHVyYXRpb25cbiAgICAgICAgICApXG4gICAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGdldFNsaWRlQ29tcG9uZW50ID0gdHlwZSA9PiB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdwaG90byc6XG4gICAgICAgIHJldHVybiBQaG90b1NsaWRlXG4gICAgICBjYXNlICd5b3V0dWJlJzpcbiAgICAgICAgcmV0dXJuIFlvdXR1YmVTbGlkZVxuICAgICAgY2FzZSAnd2ViJzpcbiAgICAgICAgcmV0dXJuIFdlYlNsaWRlXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gR2VuZXJpY1NsaWRlXG4gICAgfVxuICB9XG5cbiAgcmVuZGVyU2xpZGUgPSAoc2xpZGUsIGluZGV4KSA9PiB7XG4gICAgY29uc3QgeyBjdXJyZW50IH0gPSB0aGlzLnN0YXRlXG4gICAgY29uc3QgeyB0eXBlIH0gPSBzbGlkZVxuXG4gICAgY29uc3QgU2xpZGVDb21wb25lbnQgPSB0aGlzLmdldFNsaWRlQ29tcG9uZW50KHR5cGUpXG5cbiAgICByZXR1cm4gKFxuICAgICAgPFNsaWRlQ29tcG9uZW50XG4gICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgIHNsaWRlPXtzbGlkZX1cbiAgICAgICAgc2hvdz17aW5kZXggPT0gY3VycmVudH1cbiAgICAgICAgcmVmPXtyZWYgPT4gKHRoaXMuc2xpZGVSZWZzW2luZGV4XSA9IHJlZil9XG4gICAgICAvPlxuICAgIClcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGRlZmF1bHREdXJhdGlvbiA9IERFRkFVTFRfRFVSQVRJT04gfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7IGN1cnJlbnQsIHJlYWR5IH0gPSB0aGlzLnN0YXRlXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdzbGlkZXNob3cnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2xpZGVzaG93LXdyYXBwZXInPlxuICAgICAgICAgIHt0aGlzLm9yZGVyZWRTbGlkZXMubWFwKChzbGlkZSwgaW5kZXgpID0+IHRoaXMucmVuZGVyU2xpZGUoc2xpZGUsIGluZGV4KSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8UHJvZ3Jlc3NcbiAgICAgICAgICBkZWZhdWx0RHVyYXRpb249e2RlZmF1bHREdXJhdGlvbn1cbiAgICAgICAgICBjdXJyZW50PXtjdXJyZW50fVxuICAgICAgICAgIG9yZGVyZWRTbGlkZXM9e3RoaXMub3JkZXJlZFNsaWRlc31cbiAgICAgICAgICByZWFkeT17cmVhZHl9XG4gICAgICAgIC8+XG4gICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAge2BcbiAgICAgICAgICAgIC5zbGlkZXNob3cge1xuICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLnNsaWRlc2hvdy13cmFwcGVyIHtcbiAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIGB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2xpZGVzaG93XG4iXX0= */\\n/*@ sourceURL=C:\\\\Users\\\\user\\\\Desktop\\\\project\\\\digitalsignage-master (2)\\\\digitalsignage-master\\\\widgets\\\\slideshow\\\\src\\\\Slideshow.js */\"));\n    }\n  }, {\n    key: \"orderedSlides\",\n    get: function get() {\n      var slides = this.state.slides;\n      return _.sortBy(slides, 'order');\n    }\n    /**\n     * Moves to the next slide (and loops back if on the last slide)\n     * @return {Promise}\n     */\n\n  }]);\n\n  return Slideshow;\n}(Component);\n\nexport default Slideshow;","map":{"version":3,"sources":["C:/Users/user/Desktop/project/digitalsignage-master (2)/digitalsignage-master/widgets/slideshow/src/Slideshow.js"],"names":["React","Component","_","GenericSlide","PhotoSlide","YoutubeSlide","WebSlide","Progress","getSlides","DEFAULT_DURATION","Slideshow","props","state","current","slides","resolve","setState","length","prev","slideRefs","stop","play","defaultDuration","currentSlide","orderedSlides","ready","loadedPromise","then","setTimeout","nextSlide","waitForNextSlide","duration","type","slide","index","SlideComponent","getSlideComponent","ref","data","map","renderSlide","sortBy"],"mappings":"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","sourcesContent":["/**\n * @fileoverview Slideshow component that given an array of slide descriptions\n * of mixed types, renders the slides and automatically plays the slideshow for\n * the given durations\n */\n\nimport React, { Component } from 'react'\nimport _ from 'lodash'\n\nimport GenericSlide from './Slide/Generic'\nimport PhotoSlide from './Slide/Photo'\nimport YoutubeSlide from './Slide/Youtube'\nimport WebSlide from './Slide/Web'\nimport Progress from './Progress'\n\nimport { getSlides } from '../../../actions/slide'\n\nconst DEFAULT_DURATION = 5000\n\nclass Slideshow extends Component {\n  constructor(props) {\n    super(props)\n\n    this.slideRefs = []\n\n    this.state = {\n      current: null,\n      slides: [],\n      ready: false\n    }\n  }\n\n  componentDidMount() {\n    const { data } = this.props\n    getSlides(data).then(slides => {\n      this.setState({ current: 0, slides }, this.waitForNextSlide)\n    })\n  }\n\n  /**\n   * Sorts the slides by the given `order` value of each slide and returns the\n   * slides array in the sorted order\n   * @return {Array}\n   */\n  get orderedSlides() {\n    const { slides } = this.state\n    return _.sortBy(slides, 'order')\n  }\n\n  /**\n   * Moves to the next slide (and loops back if on the last slide)\n   * @return {Promise}\n   */\n  nextSlide = () => {\n    const { current, slides } = this.state\n    return new Promise(resolve => {\n      this.setState(\n        {\n          current: (current + 1) % slides.length\n        },\n        () => {\n          const { current } = this.state\n          const prev = (((current - 1) % slides.length) + slides.length) % slides.length\n          this.slideRefs[prev].stop()\n          this.slideRefs[current].play()\n          resolve()\n        }\n      )\n    })\n  }\n\n  /**\n   * Waits for the duration specified by each slide then moves to the next slide\n   * and waits again\n   */\n  waitForNextSlide = () => {\n    const { defaultDuration = DEFAULT_DURATION } = this.props\n    const { current } = this.state\n    const currentSlide = this.orderedSlides[current]\n    this.setState({ ready: false }, () => {\n      this.slideRefs[current] &&\n        this.slideRefs[current].loadedPromise.then(() => {\n          this.setState({ ready: true })\n          setTimeout(\n            () =>\n              this.nextSlide().then(() => {\n                this.waitForNextSlide()\n              }),\n            (currentSlide && currentSlide.duration * 1000) || defaultDuration\n          )\n        })\n    })\n  }\n\n  getSlideComponent = type => {\n    switch (type) {\n      case 'photo':\n        return PhotoSlide\n      case 'youtube':\n        return YoutubeSlide\n      case 'web':\n        return WebSlide\n      default:\n        return GenericSlide\n    }\n  }\n\n  renderSlide = (slide, index) => {\n    const { current } = this.state\n    const { type } = slide\n\n    const SlideComponent = this.getSlideComponent(type)\n\n    return (\n      <SlideComponent\n        key={index}\n        slide={slide}\n        show={index == current}\n        ref={ref => (this.slideRefs[index] = ref)}\n      />\n    )\n  }\n\n  render() {\n    const { defaultDuration = DEFAULT_DURATION } = this.props\n    const { current, ready } = this.state\n    return (\n      <div className='slideshow'>\n        <div className='slideshow-wrapper'>\n          {this.orderedSlides.map((slide, index) => this.renderSlide(slide, index))}\n        </div>\n        <Progress\n          defaultDuration={defaultDuration}\n          current={current}\n          orderedSlides={this.orderedSlides}\n          ready={ready}\n        />\n        <style jsx>\n          {`\n            .slideshow {\n              display: block;\n              position: relative;\n              flex: 1;\n              overflow: hidden;\n              width: 100%;\n              height: 100%;\n            }\n            .slideshow-wrapper {\n              position: relative;\n              width: 100%;\n              height: 100%;\n              overflow: hidden;\n            }\n          `}\n        </style>\n      </div>\n    )\n  }\n}\n\nexport default Slideshow\n"]},"metadata":{},"sourceType":"module"}